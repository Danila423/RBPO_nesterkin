# Risk Register — FastAPI Wishes App

## Контекст
Сервис: FastAPI + PostgreSQL + JWT + внешний Price API
Цель: зафиксировать ключевые риски по потокам данных (F1–F10) и определить меры, сроки и критерии закрытия.

---

## Таблица рисков

| RiskID | Описание риска | Связь (F/NFR) | L | I | Risk (L×I) | Стратегия | Владелец | Срок | Критерий закрытия |
|---------|----------------|----------------|---|---|-------------|------------|-----------|-------|-------------------|
| R1 | Брутфорс логина / подбор пароля | F1, NFR-02, NFR-03 | 3 | 5 | 15 | Снизить | @Danila423 | 2025-10-20 | Argon2id + rate-limit реализованы, тесты пройдены |
| R2 | Утечка подробностей ошибок (stack trace, JWT) | F2, NFR-07 | 2 | 5 | 10 | Снизить | @Danila423 | 2025-10-25 | RFC7807 маскирование ошибок проверено CI |
| R3 | SQL-инъекция при работе ORM | F3, NFR-03 | 2 | 4 | 8 | Снизить | @Danila423 | 2025-10-28 | ORM-вызовы валидированы, Bandit без ошибок |
| R4 | Компрометация секретов (JWT keys, DB creds) | F4, NFR-05 | 2 | 5 | 10 | Снизить | @Danila423 | 2025-11-05 | Ротация секретов ≤ 90 дней, CI scan зелёный |
| R5 | Недостаточное логирование критичных действий | F5, NFR-06 | 3 | 4 | 12 | Снизить | @Danila423 | 2025-10-22 | Аудит-логи ≥95%, проверено e2e |
| R6 | Утечка PII в логах (email, токены) | F5, NFR-07 | 2 | 5 | 10 | Снизить | @Danila423 | 2025-10-25 | Маскирование PII в логах проверено pytest |
| R7 | Атаки на внешний Price API (таймауты, DoS) | F6, NFR-04 | 3 | 3 | 9 | Снизить | @Danila423 | 2025-10-27 | Таймаут ≤5с, ≤2 ретрая, тесты CI |
| R8 | Некорректная валидация ответа внешнего API | F7, NFR-04 | 2 | 4 | 8 | Снизить | @Danila423 | 2025-10-27 | Проверка схемы JSON контракт-тестами |
| R9 | Избыточные 5xx на проде | F8, NFR-01 | 3 | 4 | 12 | Снизить | @Danila423 | 2025-10-30 | Ошибки ≤0.5%, CI pytest отчёт зелёный |
| R10 | Просроченные зависимости (High/Critical) | F9/F10, NFR-08 | 2 | 4 | 8 | Снизить | @Danila423 | 2025-11-10 | SCA отчёт CI без High/Critical |

---

## Приоритизация рисков

| Приоритет | Диапазон Risk (L×I) | Примеры |
|---------|----------------------|----------|
| High | 12–15 | R1, R5, R9 |
| Medium | 8–11 | R2, R3, R4, R6, R7, R8, R10 |
| Low | ≤7 | — |

---
